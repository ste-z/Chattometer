{"version":3,"file":"popup.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://chattometer/./src/popup/popup.js"],"sourcesContent":["// Helper to render data into the popup\nfunction renderPopup(data, req) {\n  // Update date\n  const dateEl = document.getElementById('popup-date');\n  const dateStr = new Date(req.timestamp).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  dateEl.textContent = dateStr;\n  // Update tokens\n  document.getElementById('popup-tokens').textContent = req.tokens;\n  // Update energy\n  const energyRange = data.impacts.energy_kWh;\n  const avgEnergyWh = ((energyRange.min + energyRange.max) / 2) * 1000;\n  document.getElementById('popup-energy').textContent = avgEnergyWh.toFixed(1) + ' Wh';\n  // Update GHG\n  const ghgRange = data.impacts.gwp_kgCO2eq;\n  const avgGhgG = ((ghgRange.min + ghgRange.max) / 2) * 1000;\n  document.getElementById('popup-ghg').textContent = avgGhgG.toFixed(1) + ' gCO2eq';\n}\n\n// Initial load\ndocument.addEventListener('DOMContentLoaded', () => {\n  chrome.storage.local.get(['lastImpactData', 'lastRequest'], (result) => {\n    if (result.lastImpactData && result.lastRequest) {\n      renderPopup(result.lastImpactData, result.lastRequest);\n    }\n  });\n});\n\n// Update in real time if storage changes while popup is open\nchrome.storage.onChanged.addListener((changes, area) => {\n  if (area === 'local' && (changes.lastImpactData || changes.lastRequest)) {\n    chrome.storage.local.get(['lastImpactData', 'lastRequest'], (result) => {\n      if (result.lastImpactData && result.lastRequest) {\n        renderPopup(result.lastImpactData, result.lastRequest);\n      }\n    });\n  }\n});"],"names":[],"sourceRoot":""}